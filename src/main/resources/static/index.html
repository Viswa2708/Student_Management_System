<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Management System</title>
    <meta name="description" content="A modern Student Management System with Netflix-inspired design">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <!-- ==================== LOGIN PAGE ==================== -->
    <div id="login-page" class="login-page">
        <div class="login-bg-overlay"></div>
        <div class="login-container">
            <div class="login-logo">
                <span class="logo-icon">ğŸ“</span>
                <h1 class="logo-text">StudentHub</h1>
                <p class="logo-tagline">Management System</p>
            </div>
            <form id="login-form" class="login-form" autocomplete="off">
                <h2>Sign In</h2>
                <div class="form-group">
                    <input type="text" id="login-username" placeholder=" " required autocomplete="off">
                    <label for="login-username">Username</label>
                </div>
                <div class="form-group">
                    <input type="password" id="login-password" placeholder=" " required autocomplete="off">
                    <label for="login-password">Password</label>
                </div>
                <div id="login-error" class="login-error" style="display:none;">
                    Invalid username or password
                </div>
                <button type="submit" id="login-btn" class="btn-login">
                    <span class="btn-text">Sign In</span>
                    <span class="btn-loader" style="display:none;">
                        <span class="spinner"></span>
                    </span>
                </button>
                <div class="login-help">
                    <p>Demo & New Roles:</p>
                    <div class="credentials-grid">
                        <span class="cred-badge admin" onclick="fillCredentials('admin','admin123')">ğŸ‘‘ Admin</span>
                    </div>
                    <p style="font-size: 0.8rem; margin-top: 10px; color: var(--text-muted);">
                        <i>Note: Database was reset. Sign in as Admin to create Students/Teachers.</i>
                    </p>
                </div>
            </form>
        </div>
    </div>

    <!-- ==================== MAIN APP ==================== -->
    <div id="app" class="app" style="display:none;">
        <!-- Sidebar Navigation -->
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <span class="sidebar-logo">ğŸ“</span>
                <h2>StudentHub</h2>
            </div>
            <div class="sidebar-user">
                <div class="user-avatar" id="user-avatar">A</div>
                <div class="user-info">
                    <span id="user-name" class="user-name">Admin</span>
                    <span id="user-role" class="user-role">ADMIN</span>
                </div>
            </div>
            <ul class="nav-menu" id="nav-menu">
                <!-- Populated by JS based on role -->
            </ul>
            <div class="sidebar-footer">
                <button id="logout-btn" class="btn-logout" onclick="logout()">
                    <span>ğŸšª</span> Sign Out
                </button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="topbar">
                <button class="menu-toggle" onclick="toggleSidebar()">â˜°</button>
                <div class="topbar-title" id="page-title">Dashboard</div>
                <div class="topbar-actions">
                    <div class="search-box" id="search-box" style="display:none;">
                        <input type="text" id="search-input" placeholder="Search..." oninput="handleSearch(this.value)">
                        <span class="search-icon">ğŸ”</span>
                    </div>
                </div>
            </header>

            <!-- Content Pages -->
            <div class="content-area" id="content-area">
                <!-- Dashboard Page -->
                <section id="page-dashboard" class="page active">
                    <div class="stats-grid" id="stats-grid">
                        <!-- Stats cards populated by JS -->
                    </div>
                    <div class="dashboard-sections">
                        <div class="recent-section" id="recent-students-section">
                            <h3>ğŸ“‹ Recent Students</h3>
                            <div class="recent-list" id="recent-students"></div>
                        </div>
                        <div class="recent-section" id="recent-activity-section">
                            <h3>ğŸ“Š Quick Stats</h3>
                            <div class="quick-stats" id="quick-stats"></div>
                        </div>
                    </div>
                </section>

                <!-- Students Page -->
                <section id="page-students" class="page">
                    <div class="page-header">
                        <h2>ğŸ‘¨â€ğŸ“ Students</h2>
                        <button class="btn-primary" id="btn-add-student" onclick="showModal('student')">
                            <span>+</span> Add Student
                        </button>
                    </div>
                    <div class="data-table-wrapper">
                        <table class="data-table" id="students-table">
                            <thead>
                                <tr>
                                    <th>Roll No</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Department</th>
                                    <th>Year</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="students-tbody"></tbody>
                        </table>
                        <div class="empty-state" id="students-empty" style="display:none;">
                            <span class="empty-icon">ğŸ“­</span>
                            <p>No students found</p>
                            <button class="btn-primary" onclick="showModal('student')">Add First Student</button>
                        </div>
                    </div>
                </section>

                <!-- Teachers Page -->
                <section id="page-teachers" class="page">
                    <div class="page-header">
                        <h2>ğŸ‘©â€ğŸ« Teachers</h2>
                        <button class="btn-primary" id="btn-add-teacher" onclick="showModal('teacher')">
                            <span>+</span> Add Teacher
                        </button>
                    </div>
                    <div class="data-table-wrapper">
                        <table class="data-table" id="teachers-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Subjects</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="teachers-tbody"></tbody>
                        </table>
                        <div class="empty-state" id="teachers-empty" style="display:none;">
                            <span class="empty-icon">ğŸ“­</span>
                            <p>No teachers found</p>
                            <button class="btn-primary" onclick="showModal('teacher')">Add First Teacher</button>
                        </div>
                    </div>
                </section>

                <!-- Subjects Page -->
                <section id="page-subjects" class="page">
                    <div class="page-header">
                        <h2>ğŸ“– Subjects</h2>
                        <button class="btn-primary" id="btn-add-subject" onclick="showModal('subject')">
                            <span>+</span> Add Subject
                        </button>
                    </div>
                    <div class="data-table-wrapper">
                        <table class="data-table" id="subjects-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Subject Name</th>
                                    <th>Subject Code</th>
                                    <th>Assigned Teacher</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="subjects-tbody"></tbody>
                        </table>
                        <div class="empty-state" id="subjects-empty" style="display:none;">
                            <span class="empty-icon">ğŸ“­</span>
                            <p>No subjects found</p>
                            <button class="btn-primary" onclick="showModal('subject')">Add First Subject</button>
                        </div>
                    </div>
                </section>

                <!-- Exams Page (Admin) -->
                <section id="page-exams" class="page">
                    <div class="page-header">
                        <h2>ğŸ“‹ Schedule Exams</h2>
                        <button class="btn-primary" id="btn-add-exam" onclick="showModal('exam')">
                            <span>+</span> Schedule Exam
                        </button>
                    </div>
                    <div class="data-table-wrapper">
                        <table class="data-table" id="exams-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Exam Name</th>
                                    <th>Type</th>
                                    <th>Subject</th>
                                    <th>Year</th>
                                    <th>Max Marks</th>
                                    <th>Date</th>
                                    <th>Results</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="exams-tbody"></tbody>
                        </table>
                        <div class="empty-state" id="exams-empty" style="display:none;">
                            <span class="empty-icon">ğŸ“­</span>
                            <p>No exams scheduled</p>
                            <button class="btn-primary" onclick="showModal('exam')">Schedule First Exam</button>
                        </div>
                    </div>
                </section>

                <!-- Exam Results Page (Teacher) -->
                <section id="page-exam-results" class="page">
                    <div class="page-header">
                        <h2>ğŸ“ Exam Results</h2>
                    </div>
                    <div id="teacher-exam-list">
                        <!-- Populated by JS -->
                    </div>
                </section>



                <!-- My Exam Results Page (Student) -->
                <section id="page-my-exam-results" class="page">
                    <div class="page-header">
                        <h2>ğŸ“‹ My Exam Results</h2>
                    </div>
                    <div id="student-exam-results">
                        <!-- Populated by JS -->
                    </div>
                </section>

                <!-- Analytics Page -->
                <section id="page-analytics" class="page">
                    <div class="page-header">
                        <h2>ğŸ“ˆ Analytics & Performance</h2>
                    </div>
                    <div class="analytics-grid" id="analytics-grid">
                        <!-- Populated by JS -->
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- ==================== MODAL ==================== -->
    <div id="modal-overlay" class="modal-overlay" style="display:none;" onclick="closeModal(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3 id="modal-title">Add Record</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="modal-form" class="modal-form" onsubmit="handleFormSubmit(event)">
                <div id="modal-body" class="modal-body">
                    <!-- Dynamic form fields -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn-primary" id="modal-submit-btn">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ==================== TOAST ==================== -->
    <div id="toast-container" class="toast-container"></div>

    <script src="/js/app.js"></script>
</body>

</html>